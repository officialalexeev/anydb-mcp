# Тесты для Universal DB MCP

В этой директории находятся тесты для проекта Universal DB MCP.

## Структура

- `test_base_adapter.js` - модульные тесты для базового адаптера
- `test_registry.js` - модульные тесты для реестра адаптеров
- `test_postgres_adapter.js` - модульные тесты для адаптера PostgreSQL
- `test_mongodb_adapter.js` - модульные тесты для адаптера MongoDB
- `test_sqlite_adapter.js` - модульные тесты для адаптера SQLite
- `test_redis_adapter.js` - модульные тесты для адаптера Redis
- `test_mysql_adapter.js` - модульные тесты для адаптера MySQL
- `integration_tests.js` - интеграционные тесты

## Запуск тестов

Для запуска тестов используйте команду:

```bash
npm test
```

Для получения отчета о покрытии тестами:

```bash
npm test -- --coverage
```

## Описание тестов

### Модульные тесты

Каждый адаптер тестируется отдельно, проверяются все основные методы:
- connect - проверка подключения к базе данных
- execute - проверка выполнения запросов и обработки ошибок
- close - проверка закрытия соединения

Реестр адаптеров тестируется на:
- правильное извлечение протокола из URI
- валидацию параметров
- маршрутизацию запросов к правильному адаптеру
- обработку ошибок

### Интеграционные тесты

Тесты проверяют взаимодействие между компонентами системы:
- корректность маршрутизации по протоколу URI
- работу с реальными базами данных (где возможно)

## Особенности

- Тесты написаны с использованием Jest
- Для мокирования внешних зависимостей используется внедрение зависимостей
- Интеграционные тесты для SQLite пропущены из-за особенностей работы с памятью